@page "/Gifts"
@using Microsoft.EntityFrameworkCore
@using MyList.Data_Access
@using MyList.Models
@attribute [StreamRendering]
@inject GiftListContext _context

<PageTitle>My Lists</PageTitle>

@if (giftLists == null)
{
    <p>Loading...</p>
}
else
{
    <h2>My Lists</h2>

    @foreach (var group in giftLists.GroupBy(g => g.ListName))
    {
        <h3>@group.Key</h3>  
        <ul>
            @foreach (var gift in group) 
            {
                <li>
                    <strong>@gift.GiftName</strong> - @gift.GiftDescription (@(gift.IsPurchased ? "Purchased" : "Not Purchased"))
                </li>
            }
        </ul>
    }
}

@code {    
    
    private List<GiftList> giftLists;

    protected override async Task OnInitializedAsync()
    {
        giftLists = await _context.GiftLists.ToListAsync();
    }
}